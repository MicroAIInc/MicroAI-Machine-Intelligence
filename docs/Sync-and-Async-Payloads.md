# Agent Output Payload Documentation

## Overview

The MicroAI Security & Monitoring agent outputs two types of payloads: **ASYNC** and **SYNC**. This document provides a detailed reference for the structure, parameters, and usage patterns of the [**ASYNC**](#async-payload) and [**SYNC**](#sync-payload) payload.


## ASYNC Payload

### JSON Parameter Schema Documentation

#### Root Level Parameters

| Parameter               | Description                    |
| ----------------------- | ------------------------------ |
| `apikey`                | API key (nullable)             |
| `channel_definition_id` | Channel definition identifier  |
| `feedid`                | Feed identifier (nullable)     |
| `identifier.device_id`  | Device identifier              |
| `message_type`          | Type of message, e.g., `ASYNC` |

#### Message Type Parameters

| Parameter      | Description                                                                                                             |
| -------------- | ----------------------------------------------------------------------------------------------------------------------- |
| `DeviceName`   | Hostname of the device                                                                                                  |
| `HealthScore`  | AI-generated score reflecting device security and performance                                                           |
| `DTM`  |  Estimation of number of days until next needed maintenance    |
| `RL`  | Estimation of the number of days until complete asset failure   |
| `Duty`  | Duty Rate of the asset considering only asset up time        |
| `InactiveStatus`  | Launchpad specific message type that contols the active status in the dashboard                                                           |
| `MAIAlert`     | machine intelligence alerts generated by MicroAI, with severity levels (`Critical`, `High`, `Medium`, `Low`, `Info`) or rootcause statuses |

#### Device Information Parameters

| Parameter       | Description                                                        |
| --------------- | ------------------------------------------------------------------ |
| `device_id`     | Unique identifier for the device (e.g., MAC address)               |
| `edge_datetime` | Timestamp in ISO 8601 format indicating when the data was recorded |

#### Group Parameters

| Parameter    | Description                                            |
| ------------ | ------------------------------------------------------ |
| `group_id`   | Identifier for the data group (e.g., `1` for Security) |
| `group_name` | Name of the group (e.g., `Security`, `Monitoring`)     |
| `rank`       | Priority ranking within the group                      |

#### Sensor Parameters and Values

| Parameter       | Description                                                    |
| --------------- | -------------------------------------------------------------- |
| `sensor_id`     | Identifier for the sensor (nullable if not applicable)         |
| `sensor_name`   | Name of the sensor (nullable)                                  |
| `lower_value`   | Minimum expected value for the sensor                          |
| `upper_value`   | Maximum expected value for the sensor                          |
| `current_value` | Current sensor reading                                         |
| `number_value`  | Numeric representation of the sensor reading                   |
| `severity`      | Severity level of detected faults (nullable)                   |
| `text_json`     | JSON-based text data (nullable)                                |
| `text_value`    | The text content of the message, may include OS or alerts info |
| `type`          | Category identifier for alert classification                   |
| `use_case_id`   | Identifier for use case (e.g., `security`, `monitoring`)       |

### Usage Patterns by Message Type


#### `MAIAlert`
- Reports AI-generated machine intelligence alerts
- Uses `severity` to classify alert level
- Helps in detecting anomalies and machine faults

#### `HealthScore`
- Reports AI-calculated health score for the device
- Generated for every row of data
- Calculated based on the behavior of the input features
- 
#### `DTM`
- Reports AI-calculated Days to next maintenace for the device
- Generated for every row of data
- Calculated based on the behavior of the input features
- 
- #### `RL`
- Reports AI-calculated remaining life for the device
- Generated for every row of data
- Calculated based on the behavior of the input features

#### `Tvalue & Nvalue`
- `Tvalue` represents text-based insights (e.g., OS info, alerts)
- `Nvalue` represents numerical metrics like scores or counts

#### `Severity Tracking`
- Enables classification and prioritization of threats
- Levels include: `Critical`, `High`, `Medium`, `Low`, `Info`

### JSON Schema Reference

The complete JSON schema for the ASYNC payload is as follows:

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "apikey": {
      "type": ["string", "null"],
      "description": "API key for authentication (can be null if not required)."
    },
    "channel_definition_id": {
      "type": "string",
      "description": "Unique identifier for the channel definition."
    },
    "feed": {
      "type": "array",
      "description": "List of sensor data records collected from device.",
      "items": {
        "type": "object",
        "properties": {
          "current_value": {
            "type": "number",
            "description": "Current value of the sensor reading."
          },
          "device_id": {
            "type": "string",
            "description": "Unique identifier of the device sending the data."
          },
          "edge_datetime": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when data was collected at the edge."
          },
          "group_id": {
            "type": "integer",
            "description": "ID representing the group to which the device belongs."
          },
          "group_name": {
            "type": "string",
            "description": "Name of the group associated with the device."
          },
          "lower_value": {
            "type": "number",
            "description": "Lower value for the sensor reading."
          },
          "message_type": {
            "type": "string",
            "enum": [
              "DeviceName",
              "HealthScore",
              "DTM",
              "RL",
              "MAIAlert",
              "InactiveStatus"
            ],
            "description": "Type of the message being sent."
          },
          "number_value": {
            "type": "number",
            "description": "Normalized sensor reading (e.g., percentage)."
          },
          "rank": {
            "type": "integer",
            "description": "Ranking of the sensor data in a given context."
          },
          "sensor_id": {
            "type": "string",
            "description": "Unique identifier of the sensor."
          },
          "sensor_name": {
            "type": "string",
            "description": "Name of the sensor."
          },
          "severity": {
            "type": "string",
            "description": "Severity level of the message."
          },
          "text_json": {
            "type": "string",
            "description": "Additional JSON text data."
          },
          "text_value": {
            "type": "string",
            "description": "The text content of the message, which may include multiple readings from the device such as operating system details or AI-generated alerts."
          },
          "type": {
            "type": "string",
            "description": "This is the category identifier, each type of alerts has a unique identifier that can be used to for categorization"
          },
          "upper_value": {
            "type": "number",
            "description": "Upper value for the sensor reading."
          },
          "use_case_id": {
            "type": "string",
            "description": "Use case associated with the message."
          }
        },
        "required": [
          "device_id", "edge_datetime", "group_id", "group_name", "message_type", "rank", "use_case_id"
        ]
      }
    },
    "feedid": {
      "type": ["string", "null"],
      "description": "Optional feed identifier (can be null)."
    },
    "identifier": {
      "type": "object",
      "description": "Object containing unique identification details.",
      "properties": {
        "device_id": {
          "type": "string",
          "description": "Unique identifier of the device (MAC address)."
        }
      },
      "required": ["device_id"]
    },
    "message_type": {
      "type": "string",
      "description": "Type of the message being sent (ASYNC)."
    }
  },
  "required": ["channel_definition_id", "feed", "identifier", "message_type"]
}

```

### Sample Payload

```json
{
  "apikey": null,
  "channel_definition_id": "7vhSY6+Qky+h12uX9OyNO5V4Y4k5z5nAlHSbCZ2qSK0=",
  "feed": [
    {
      "current_value": 0,
      "device_id": "b8:27:eb:e8:7a:ef_AtomMLPlus",
      "edge_datetime": "2025-04-29T21:47:13.297Z",
      "group_id": 1,
      "group_name": "Group 1",
      "lower_value": 0,
      "message_type": "HealthScore",
      "number_value": 99.224305,
      "rank": 0,
      "sensor_id": "",
      "sensor_name": "",
      "severity": "",
      "text_json": "",
      "text_value": "",
      "type": "",
      "upper_value": 0,
      "use_case_id": "apm"
    },
    {
      "current_value": 0,
      "device_id": "b8:27:eb:e8:7a:ef_AtomMLPlus",
      "edge_datetime": "2025-04-29T21:47:13.297Z",
      "group_id": 1,
      "group_name": "Group 1",
      "lower_value": 0,
      "message_type": "DTM",
      "number_value": 38.407593,
      "rank": 0,
      "sensor_id": "",
      "sensor_name": "",
      "severity": "",
      "text_json": "",
      "text_value": "",
      "type": "",
      "upper_value": 0,
      "use_case_id": "apm"
    },
    {
      "current_value": 0,
      "device_id": "b8:27:eb:e8:7a:ef_AtomMLPlus",
      "edge_datetime": "2025-04-29T21:47:13.297Z",
      "group_id": 1,
      "group_name": "Group 1",
      "lower_value": 0,
      "message_type": "RL",
      "number_value": 1000.0001,
      "rank": 0,
      "sensor_id": "",
      "sensor_name": "",
      "severity": "",
      "text_json": "",
      "text_value": "",
      "type": "",
      "upper_value": 0,
      "use_case_id": "apm"
    },
    {
      "current_value": 0,
      "device_id": "b8:27:eb:e8:7a:ef_AtomMLPlus",
      "edge_datetime": "2025-04-29T21:47:13.297Z",
      "group_id": 1,
      "group_name": "Group 1",
      "lower_value": 0,
      "message_type": "Duty",
      "number_value": 18.592579,
      "rank": 0,
      "sensor_id": "",
      "sensor_name": "",
      "severity": "",
      "text_json": "",
      "text_value": "",
      "type": "",
      "upper_value": 0,
      "use_case_id": "apm"
    },
    {
      "current_value": 0,
      "device_id": "b8:27:eb:e8:7a:ef_AtomMLPlus",
      "edge_datetime": "2025-04-29T21:47:13.297Z",
      "group_id": 1,
      "group_name": "Group 1",
      "lower_value": 0,
      "message_type": "DeviceName",
      "number_value": 0,
      "rank": 0,
      "sensor_id": "",
      "sensor_name": "",
      "severity": "",
      "text_json": "",
      "text_value": "MicroAI Lab Robot",
      "type": "",
      "upper_value": 0,
      "use_case_id": "apm"
    },
    {
      "current_value": 0,
      "device_id": "b8:27:eb:e8:7a:ef_AtomMLPlus",
      "edge_datetime": "2025-04-29T21:47:13.297Z",
      "group_id": 1,
      "group_name": "Group 1",
      "lower_value": 0,
      "message_type": "InactiveStatus",
      "number_value": 40,
      "rank": 0,
      "sensor_id": "",
      "sensor_name": "",
      "severity": "",
      "text_json": "",
      "text_value": "",
      "type": "",
      "upper_value": 0,
      "use_case_id": "apm"
    }
  ],
  "feedid": null,
  "identifier": {
    "device_id": "b8:27:eb:e8:7a:ef_AtomMLPlus"
  }
}
```


## SYNC Payload

The `SYNC` payload is used to report system metrics from edge devices. Each payload includes metadata and a list of sensor data records.

## Root Level Parameters

| Parameter                | Description                                        |
|-------------------------|----------------------------------------------------|
| `apikey`                | API key (nullable)                                 |
| `channel_definition_id` | Channel definition identifier                      |
| `feedid`                | Feed identifier (nullable)                         |
| `identifier.device_id`  | Device identifier                                  |
| `message_type`          | Type of message, e.g., `SYNC`                      |

## Device Information Parameters

| Parameter         | Description                        |
|------------------|------------------------------------|
| `device_id`      | Auto-generated device ID (MAC)     |
| `device_os`      | Operating system of the device     |
| `edge_datetime`  | Edge datetime (ISO 8601 string)    |
| `gateway_id`     | Gateway MAC address                |
| `host_device_id` | Host name of the device            |

## Location Parameters

| Parameter       | Description                     |
|----------------|---------------------------------|
| `latitude`     | Latitude of the device           |
| `longitude`    | Longitude of the device          |
| `location_name`| Human-readable location name     |

## Group Parameters

| Parameter    | Description                                |
|-------------|--------------------------------------------|
| `group_id`  | Group ID (e.g., `1` for Monitoring)         |
| `group_name`| Group name (e.g., `Monitoring`, `Security`) |
| `rank`      | Rank identifier                            |

## Device Status Parameters

| Parameter             | Description                   |
|----------------------|-------------------------------|
| `machine_usage_time` | Uptime in seconds             |

## Sensor Parameters and Usage

| Parameter          | Description                                                |
|-------------------|------------------------------------------------------------|
| `sensor_id`       | Sensor identifier (e.g., `xCPU`, `xRAM`, etc.)             |
| `sensor_name`     | Sensor name (e.g., `CPU`, `RAM`, `Disk_Read_Write`, etc.)  |
| `lower_bound`     | Upload MB/s, Disk Reads delta, etc.                        |
| `upper_bound`     | Download MB/s, Disk Writes delta, etc.                     |
| `normalized_value`| CPU, RAM, Disk Utilization percentages                     |
| `temp_1`          | Network Transmitted utilization percent                    |
| `temp_2`          | Network Received utilization percent                       |
| `temp_3`          | Temporary string (nullable)                                |
| `temp_4`          | Temporary value (nullable)                                 |

## Additional Parameters

| Parameter     | Description                          |
|--------------|--------------------------------------|
| `time_span`  | Not used (nullable)                  |
| `unix_time`  | Not used (nullable)                  |
| `use_case_id`| Use case identifier (e.g., `security`)|


### JSON Schema Reference

The complete JSON schema for the SYNC payload is as follows:

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "apikey": {
      "type": ["string", "null"],
      "description": "API key for authentication (can be null if not required)."
    },
    "channel_definition_id": {
      "type": "string",
      "description": "Unique identifier for the channel definition."
    },
    "feed": {
      "type": "array",
      "description": "List of sensor data records collected from device.",
      "items": {
        "type": "object",
        "properties": {
          "device_id": {
            "type": "string",
            "description": "Unique identifier of the device sending the data."
          },
          "device_os": {
            "type": "string",
            "description": "Operating system of the device."
          },
          "edge_datetime": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when data was collected at the edge."
          },
          "gateway_id": {
            "type": "string",
            "description": "Gateway MAC address."
          },
          "group_id": {
            "type": "integer",
            "description": "ID representing the group to which the device belongs (1 for Monitoring, 2 for Security)"
          },
          "group_name": {
            "type": "string",
            "description": "Name of the group associated with the device (Monitoring or Security)"
          },
          "host_device_id": {
            "type": "string",
            "description": "Hostname of the device."
          },
          "latitude": {
            "type": "number",
            "description": "Geographical latitude where the device is located."
          },
          "location_name": {
            "type": "string",
            "description": "Human-readable name of the location."
          },
          "longitude": {
            "type": "number",
            "description": "Geographical longitude where the device is located."
          },
          "lower_bound": {
            "type": "number",
            "description": "Lower threshold value for the sensor reading."
          },
          "machine_usage_time": {
            "type": "integer",
            "description": "Total machine usage time in seconds."
          },
          "normalized_value": {
            "type": "number",
            "description": "Normalized sensor reading (e.g., percentage)."
          },
          "rank": {
            "type": "integer",
            "description": "Ranking of the sensor data in a given context."
          },
          "sensor_id": {
            "type": "string",
            "description": "Unique identifier of the sensor."
          },
          "sensor_name": {
            "type": "string",
            "description": "Name of the sensor."
          },
          "temp_1": {
            "type": ["number", "null"],
            "description": "First temp reading (or null if not available)."
          },
          "temp_2": {
            "type": ["number", "null"],
            "description": "Second temp reading (or null if not available)."
          },
          "temp_3": {
            "type": ["string", "null"],
            "description": "Third temp reading (string-based, can be null)."
          },
          "temp_4": {
            "type": ["number", "null"],
            "description": "Fourth temp reading (or null if not available)."
          },
          "time_span": {
            "type": ["number", "null"],
            "description": "Time span for which the data is collected (null if unknown)."
          },
          "unix_time": {
            "type": ["number", "null"],
            "description": "Unix timestamp when the data was recorded."
          },
          "upper_bound": {
            "type": "number",
            "description": "Upper threshold value for the sensor reading."
          },
          "use_case_id": {
            "type": "string",
            "description": "Representing the use case for which the data is collected (Monitoring or Security)."
          }
        },
        "required": [
          "device_id", "device_os", "edge_datetime", "gateway_id",
          "group_id", "group_name", "host_device_id", "latitude",
          "location_name", "longitude", "lower_bound", "machine_usage_time",
          "normalized_value", "rank", "sensor_id", "sensor_name",
          "temp_1", "temp_2", "temp_3", "temp_4", "time_span",
          "unix_time", "upper_bound", "use_case_id"
        ]
      }
    },
    "feedid": {
      "type": ["string", "null"],
      "description": "Optional feed identifier (can be null)."
    },
    "identifier": {
      "type": "object",
      "description": "Object containing unique identification details.",
      "properties": {
        "device_id": {
          "type": "string",
          "description": "Unique identifier of the device (MAC address)."
        }
      },
      "required": ["device_id"]
    },
    "message_type": {
      "type": "string",
      "description": "Type of the message being sent (e.g., SYNC or ASYNC, etc.)."
    }
  },
  "required": ["channel_definition_id", "feed", "identifier", "message_type"]
}

```

### Sample Payload

```json
{
  "apikey": null,
  "channel_definition_id": "lzoS47P2h0W2kAxS5Xp1GMEROU/9A2s0RVzG6Y14Q3k=",
  "feed": [
    {
      "device_id": "b8:27:eb:e8:7a:ef_AtomMLPlus",
      "device_os": "linux",
      "edge_datetime": "2025-04-29T21:45:34.890Z",
      "gateway_id": "",
      "group_id": 1,
      "group_name": "Group 1",
      "host_device_id": "",
      "latitude": 32.776,
      "location_name": "",
      "longitude": -96.797,
      "lower_bound": -0.0626956969499588,
      "machine_usage_time": 0,
      "normalized_value": 0.0032110000029206276,
      "rank": 3,
      "sensor_id": "c3",
      "sensor_name": "Accel Z",
      "temp_1": 0,
      "temp_2": 0,
      "temp_3": "",
      "temp_4": 0,
      "time_span": 0,
      "unix_time": 0,
      "upper_bound": 0.05836927890777588,
      "use_case_id": "apm"
    },
    {
      "device_id": "b8:27:eb:e8:7a:ef_AtomMLPlus",
      "device_os": "linux",
      "edge_datetime": "2025-04-29T21:45:34.890Z",
      "gateway_id": "",
      "group_id": 1,
      "group_name": "Group 1",
      "host_device_id": "",
      "latitude": 32.776,
      "location_name": "",
      "longitude": -96.797,
      "lower_bound": 0.00027564913034439087,
      "machine_usage_time": 0,
      "normalized_value": 0.0077229999005794525,
      "rank": 4,
      "sensor_id": "c4",
      "sensor_name": "Gyro X",
      "temp_1": 0,
      "temp_2": 0,
      "temp_3": "",
      "temp_4": 0,
      "time_span": 0,
      "unix_time": 0,
      "upper_bound": 0.012529537081718445,
      "use_case_id": "apm"
    },
    {
      "device_id": "b8:27:eb:e8:7a:ef_AtomMLPlus",
      "device_os": "linux",
      "edge_datetime": "2025-04-29T21:45:34.890Z",
      "gateway_id": "",
      "group_id": 1,
      "group_name": "Group 1",
      "host_device_id": "",
      "latitude": 32.776,
      "location_name": "",
      "longitude": -96.797,
      "lower_bound": -1.4560072422027588,
      "machine_usage_time": 0,
      "normalized_value": 0.0019749999046325684,
      "rank": 5,
      "sensor_id": "c5",
      "sensor_name": "Gyro Y",
      "temp_1": 0,
      "temp_2": 0,
      "temp_3": "",
      "temp_4": 0,
      "time_span": 0,
      "unix_time": 0,
      "upper_bound": 0.7353148460388184,
      "use_case_id": "apm"
    },
    {
      "device_id": "b8:27:eb:e8:7a:ef_AtomMLPlus",
      "device_os": "linux",
      "edge_datetime": "2025-04-29T21:45:34.890Z",
      "gateway_id": "",
      "group_id": 1,
      "group_name": "Group 1",
      "host_device_id": "",
      "latitude": 32.776,
      "location_name": "",
      "longitude": -96.797,
      "lower_bound": -0.02871594950556755,
      "machine_usage_time": 0,
      "normalized_value": 0,
      "rank": 1,
      "sensor_id": "c6",
      "sensor_name": "Gyro Z",
      "temp_1": 0,
      "temp_2": 0,
      "temp_3": "",
      "temp_4": 0,
      "time_span": 0,
      "unix_time": 0,
      "upper_bound": 0.03198758885264397,
      "use_case_id": "apm"
    },
    {
      "device_id": "b8:27:eb:e8:7a:ef_AtomMLPlus",
      "device_os": "linux",
      "edge_datetime": "2025-04-29T21:45:34.890Z",
      "gateway_id": "",
      "group_id": 1,
      "group_name": "Group 1",
      "host_device_id": "",
      "latitude": 32.776,
      "location_name": "",
      "longitude": -96.797,
      "lower_bound": -0.012509563937783241,
      "machine_usage_time": 0,
      "normalized_value": 0.015046999789774418,
      "rank": 6,
      "sensor_id": "c1",
      "sensor_name": "Accel X",
      "temp_1": 0,
      "temp_2": 0,
      "temp_3": "",
      "temp_4": 0,
      "time_span": 0,
      "unix_time": 0,
      "upper_bound": 0.05534762889146805,
      "use_case_id": "apm"
    },
    {
      "device_id": "b8:27:eb:e8:7a:ef_AtomMLPlus",
      "device_os": "linux",
      "edge_datetime": "2025-04-29T21:45:34.890Z",
      "gateway_id": "",
      "group_id": 1,
      "group_name": "Group 1",
      "host_device_id": "",
      "latitude": 32.776,
      "location_name": "",
      "longitude": -96.797,
      "lower_bound": -0.06518062949180603,
      "machine_usage_time": 0,
      "normalized_value": 0.09404399991035461,
      "rank": 2,
      "sensor_id": "c2",
      "sensor_name": "Accel Y",
      "temp_1": 0,
      "temp_2": 0,
      "temp_3": "",
      "temp_4": 0,
      "time_span": 0,
      "unix_time": 0,
      "upper_bound": 0.32065826654434204,
      "use_case_id": "apm"
    }
  ],
  "feedid": null,
  "identifier": {
    "device_id": "b8:27:eb:e8:7a:ef_AtomMLPlus"
  }
}
```